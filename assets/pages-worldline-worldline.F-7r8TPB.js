import{a as e,r as t,c as a,b as l,w as s,i as o,o as c,e as d,g as n,f as u,t as r,S as f,p as _,F as i,x as v,n as p,q as h}from"./index-d8QlkS4T.js";import{u as m}from"./world.B5aCNI0S.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=g(e({__name:"worldline",setup(e){const g=m(),y=t(Date.now()-7776e6),b=a(()=>{const e=Math.floor((Date.now()-y.value)/864e5);return e<7?"ç¬¬ä¸€ç« Â·èŒèŠ½":e<30?"ç¬¬äºŒç« Â·æˆé•¿":e<90?"ç¬¬ä¸‰ç« Â·ç»½æ”¾":"ç¬¬å››ç« Â·æ”¶è·"}),w=a(()=>g.worldlineRecords),M=a(()=>w.value.filter(e=>"event_start"===e.type||"choice"===e.type)),$=a(()=>w.value.filter(e=>"event_complete"===e.type)),D=a(()=>w.value.filter(e=>"event_start"===e.type).length),k=a(()=>w.value.filter(e=>"choice"===e.type).length),x=a(()=>Math.floor((Date.now()-y.value)/864e5));function j(e){return e%2==0?"left":"right"}function F(e){return{event_start:"ğŸš€",choice:"ğŸ¯",event_complete:"âœ…"}[e]||"ğŸ“Œ"}function q(e){const t=Date.now()-e,a=Math.floor(t/6e4),l=Math.floor(t/36e5),s=Math.floor(t/864e5);return a<1?"åˆšåˆš":a<60?`${a}åˆ†é’Ÿå‰`:l<24?`${l}å°æ—¶å‰`:1===s?"æ˜¨å¤©":s<7?`${s}å¤©å‰`:s<30?`${Math.floor(s/7)}å‘¨å‰`:s<365?`${Math.floor(s/30)}ä¸ªæœˆå‰`:`${Math.floor(s/365)}å¹´å‰`}function I(e){const t=new Date(e);return`${t.getFullYear()}å¹´${t.getMonth()+1}æœˆ${t.getDate()}æ—¥`}return(e,t)=>{const a=n,m=o,g=f;return c(),l(m,{class:"worldline-page"},{default:s(()=>[d(m,{class:"header"},{default:s(()=>[d(a,{class:"title"},{default:s(()=>[u("ğŸŒ³ æˆ‘çš„ä¸–ç•Œçº¿")]),_:1}),d(a,{class:"era"},{default:s(()=>[u(r(b.value),1)]),_:1})]),_:1}),d(g,{class:"tree-container","scroll-y":""},{default:s(()=>[d(m,{class:"tree-trunk"}),d(m,{class:"worldline-tree"},{default:s(()=>[(c(!0),_(i,null,v(M.value,(e,t)=>(c(),l(m,{key:e.id,class:"tree-node active"},{default:s(()=>[d(m,{class:p(["node-branch",j(t)])},{default:s(()=>[d(m,{class:"branch-line active-line"})]),_:2},1032,["class"]),d(m,{class:p(["node-content",{left:t%2==0,right:t%2==1}])},{default:s(()=>[d(m,{class:"node-card active-card"},{default:s(()=>[d(m,{class:"node-icon"},{default:s(()=>[u(r(F(e.type)),1)]),_:2},1024),d(m,{class:"node-info"},{default:s(()=>[d(a,{class:"node-title"},{default:s(()=>[u(r(e.title),1)]),_:2},1024),d(a,{class:"node-desc"},{default:s(()=>[u(r(e.detail||"è¿›è¡Œä¸­..."),1)]),_:2},1024),d(m,{class:"node-meta"},{default:s(()=>[d(a,{class:"node-time"},{default:s(()=>[u(r(q(e.timestamp)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(m,{class:"node-status-badge active-badge"},{default:s(()=>[u("è¿›è¡Œä¸­")]),_:1})]),_:2},1024)]),_:2},1032,["class"]),d(m,{class:"node-dot active-dot"},{default:s(()=>[d(m,{class:"dot-glow"})]),_:1})]),_:2},1024))),128)),(c(!0),_(i,null,v($.value,(e,t)=>(c(),l(m,{key:e.id,class:"tree-node completed"},{default:s(()=>[d(m,{class:p(["node-branch",j(t+M.value.length)])},{default:s(()=>[d(m,{class:"branch-line completed-line"})]),_:2},1032,["class"]),d(m,{class:p(["node-content",{left:(t+M.value.length)%2==0,right:(t+M.value.length)%2==1}])},{default:s(()=>[d(m,{class:"node-card completed-card"},{default:s(()=>[d(m,{class:"node-icon"},{default:s(()=>[u(r(F(e.type)),1)]),_:2},1024),d(m,{class:"node-info"},{default:s(()=>[d(a,{class:"node-title"},{default:s(()=>[u(r(e.title),1)]),_:2},1024),d(a,{class:"node-desc"},{default:s(()=>[u(r(e.detail||"å·²å®Œæˆ"),1)]),_:2},1024)]),_:2},1024),d(m,{class:"node-status-badge completed-badge"},{default:s(()=>[u("âœ“")]),_:1})]),_:2},1024)]),_:2},1032,["class"]),d(m,{class:"node-dot completed-dot"})]),_:2},1024))),128)),0===w.value.length?(c(),l(m,{key:0,class:"empty-state"},{default:s(()=>[d(a,{class:"empty-icon"},{default:s(()=>[u("ğŸŒŒ")]),_:1}),d(a,{class:"empty-title"},{default:s(()=>[u("ä¸–ç•Œçº¿å°šæœªå±•å¼€")]),_:1}),d(a,{class:"empty-desc"},{default:s(()=>[u("å»æ¢ç´¢é¡µé¢å‚ä¸äº‹ä»¶ï¼Œå¼€å§‹ä½ çš„æ•…äº‹å§")]),_:1})]),_:1})):h("",!0),d(m,{class:"tree-node root"},{default:s(()=>[d(m,{class:"root-content"},{default:s(()=>[d(m,{class:"root-card"},{default:s(()=>[d(m,{class:"root-icon"},{default:s(()=>[u("ğŸŒ±")]),_:1}),d(m,{class:"root-info"},{default:s(()=>[d(a,{class:"root-title"},{default:s(()=>[u("ä¸–ç•Œçº¿èµ·ç‚¹")]),_:1}),d(a,{class:"root-date"},{default:s(()=>[u(r(I(y.value))+" åŠ å…¥",1)]),_:1}),d(a,{class:"root-desc"},{default:s(()=>[u("ä½ çš„æ•…äº‹ä»è¿™é‡Œå¼€å§‹...")]),_:1})]),_:1})]),_:1})]),_:1}),d(m,{class:"root-dot"},{default:s(()=>[d(m,{class:"root-glow"})]),_:1})]),_:1}),d(m,{class:"tree-roots"},{default:s(()=>[d(m,{class:"root-line left"}),d(m,{class:"root-line center"}),d(m,{class:"root-line right"})]),_:1})]),_:1}),d(m,{class:"stats-summary"},{default:s(()=>[d(m,{class:"stat-item"},{default:s(()=>[d(a,{class:"stat-value"},{default:s(()=>[u(r(D.value),1)]),_:1}),d(a,{class:"stat-label"},{default:s(()=>[u("å‚ä¸äº‹ä»¶")]),_:1})]),_:1}),d(m,{class:"stat-item"},{default:s(()=>[d(a,{class:"stat-value"},{default:s(()=>[u(r(k.value),1)]),_:1}),d(a,{class:"stat-label"},{default:s(()=>[u("å…³é”®æŠ‰æ‹©")]),_:1})]),_:1}),d(m,{class:"stat-item"},{default:s(()=>[d(a,{class:"stat-value"},{default:s(()=>[u(r(x.value),1)]),_:1}),d(a,{class:"stat-label"},{default:s(()=>[u("æˆé•¿å¤©æ•°")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-6a2cb37c"]]);export{y as default};
